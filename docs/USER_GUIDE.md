# Руководство пользователя Nota AI Bot

Добро пожаловать в Nota AI Bot! Этот бот поможет вам автоматизировать обработку товарных накладных, экономя ваше время и снижая количество ошибок.

## Содержание

- [Начало работы](#начало-работы)
- [Основные команды](#основные-команды)
- [Как это работает: Жизненный цикл обработки накладной](#как-это-работает-жизненный-цикл-обработки-накладной)
  - [1. Отправка фотографии накладной](#1-отправка-фотографии-накладной)
  - [2. Распознавание и получение отчета](#2-распознавание-и-получение-отчета)
  - [3. Редактирование данных](#3-редактирование-данных)
  - [4. Отправка в Syrve](#4-отправка-в-syrve)
- [Режимы редактирования](#режимы-редактирования)
  - [Редактирование с помощью кнопок](#редактирование-с-помощью-кнопок)
  - [Свободное редактирование текстом](#свободное-редактирование-текстом)
- [Полезные возможности](#полезные-возможности)
  - [Асинхронная обработка](#асинхронная-обработка)
  - [Автоматическая коррекция ошибок](#автоматическая-коррекция-ошибок)
- [Часто задаваемые вопросы (FAQ)](#часто-задаваемые-вопросы-faq)

## Начало работы

1.  Найдите бота в Telegram по его имени (например, `@NotaV3Bot` - уточните актуальное имя у администратора).
2.  Начните диалог с ботом, отправив команду `/start`.
3.  Бот предложит вам отправить фотографию накладной для обработки.

## Основные команды

-   `/start` - начать работу с ботом.
-   `/help` - получить справку по доступным командам.
-   `/cancel` - отменить текущую операцию (например, процесс редактирования).
-   `/edit` - перейти в режим редактирования последней обработанной накладной (если применимо).

## Как это работает: Жизненный цикл обработки накладной

### 1. Отправка фотографии накладной

-   Сделайте четкую фотографию вашей бумажной накладной.
-   Отправьте эту фотографию боту.

### 2. Распознавание и получение отчета

-   Бот получит изображение и начнет процесс распознавания данных (OCR).
-   После обработки вы получите структурированный отчет с информацией о поставщике, дате, номере накладной, а также списком товаров, их количеством, ценами и суммами.
-   Пример отчета:
    ```
    Поставщик: ООО "Продукты Питания"
    Дата: 2025-05-01
    Номер: 12345

    Товары:
    1. Яблоки голден - 10 кг x 150 = 1500
    2. Груши конференция - 5 кг x 200 = 1000

    Итого: 2500
    ```
-   Бот также укажет на возможные проблемы: нераспознанные позиции, несоответствие единиц измерения и т.д.

### 3. Редактирование данных

-   Если в отчете есть ошибки или неточности, вы можете их исправить.
-   Нажмите кнопку "Редактировать" под отчетом, чтобы перейти в режим редактирования.
-   Подробнее о режимах редактирования читайте [ниже](#режимы-редактирования).

### 4. Отправка в Syrve

-   После того как все данные проверены и исправлены, подтвердите накладную.
-   Бот сформирует документ и отправит его в вашу систему управления рестораном Syrve (если настроена интеграция).
-   Вы получите уведомление о результате отправки.

## Режимы редактирования

### Редактирование с помощью кнопок

1.  Нажмите кнопку "Редактировать" под отчетом.
2.  Бот предложит клавиатуру с кнопками для выбора поля, которое вы хотите изменить (например, "Поставщик", "Дата", "Строка 1", "Строка 2" и т.д.).
3.  Выберите нужное поле.
4.  Отправьте новое значение для этого поля.
5.  Подтвердите изменения.

### Свободное редактирование текстом

Этот режим позволяет вносить исправления, используя команды на естественном языке.

1.  Нажмите кнопку "Свободное редактирование" (или аналогичную, в зависимости от интерфейса).
2.  Введите команду в свободной форме, например:
    *   "Измени цену яблок на 180"
    *   "В строке 2 количество 7"
    *   "Поставщик ООО Ромашка"
    *   "Добавь товар: Молоко 3.2% 10 шт по 50 руб"
    *   "Удали строку 3"
3.  Бот обработает вашу команду и внесет изменения. Для максимальной эффективности формулируйте команды четко и однозначно.

## Полезные возможности

### Асинхронная обработка

-   Бот обрабатывает каждую фотографию и команду в отдельном потоке.
-   Это значит, что интерфейс не будет "зависать" при загрузке больших изображений, и вы можете отправлять новые запросы, не дожидаясь полного завершения предыдущих.
-   Если вы отправите новое фото до завершения обработки предыдущего, бот корректно завершит старую задачу и начнет новую.

### Автоматическая коррекция ошибок

После распознавания бот автоматически пытается исправить некоторые распространенные ошибки:
-   **Форматы чисел**: Преобразует числа типа "10,000", "10.000", "10k", "10к" в стандартный вид "10000".
-   **Опечатки в названиях**: Может исправлять небольшие опечатки в названиях товаров, если они похожи на известные товары из вашего каталога (например, "Молокоо" -> "Молоко").
-   **Пропуски и лишние символы**: Старается убирать случайные символы в числовых полях.

Это помогает повысить точность итогового отчета и уменьшить необходимость ручных исправлений.

## Часто задаваемые вопросы (FAQ)

**В: Что делать, если бот неправильно распознал текст?**
О: Используйте режим редактирования (кнопочный или свободный текст) для исправления ошибок. Если ошибок много или качество распознавания низкое, попробуйте сделать более четкую фотографию накладной и отправить ее заново. Убедитесь, что освещение хорошее, текст не размыт и хорошо читаем.

**В: Как эффективно использовать свободное редактирование?**
О: Формулируйте команды конкретно и однозначно. Указывайте номера строк или точные названия товаров, чтобы бот мог точно определить, что нужно изменить. Например, вместо "поменяй цену" лучше написать "строка 1 цена 150".

**В: Можно ли загружать несколько накладных одновременно?**
О: Текущая версия бота обрабатывает накладные по одной. Дождитесь завершения обработки текущей накладной перед отправкой следующей фотографии. (Примечание: уточните эту информацию, если бот поддерживает массовую загрузку).

**В: Куда обращаться, если возникли проблемы или есть предложения?**
О: Пожалуйста, создайте issue в репозитории проекта (если это доступно) или свяжитесь с администратором/разработчиками бота.
