[Unit]
After=redis-server.service
Requires=redis-server.service
Description=Nota Telegram Bot

[Service]
# Улучшенное управление завершением процесса
TimeoutStartSec=30
TimeoutStopSec=10
KillMode=process
KillSignal=SIGINT
Restart=on-failure
RestartSec=5

# Увеличение памяти для OpenAI API
MemoryMax=512M

# Переопределение переменных окружения
Environment="ENV=production"
Environment="LOG_LEVEL=DEBUG"

# Настройки логирования (используем стандартный вывод для journald)
StandardOutput=journal
StandardError=journal
SyslogIdentifier=nota-bot

# Лимиты
LimitNOFILE=4096
